import{_ as s,o as n,c as a,U as l}from"./chunks/framework.97dce334.js";const A=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"other/electron.md","filePath":"other/electron.md","lastUpdated":1715771741000}'),o={name:"other/electron.md"},e=l(`<h2 id="faq" tabindex="-1">FAQ <a class="header-anchor" href="#faq" aria-label="Permalink to &quot;FAQ&quot;">​</a></h2><ol><li><p>安装 electron 经常会失败, 如果发现卡在 postinstall 阶段, 直接去 node_modules 下找到 electron 的 package.json 将 postinstall 命令删除, 然后安装其他的包, 安装完成后再手动安装 electron 即可:</p><ol><li><p>手动去 electron 安装对应系统的压缩包, 解压后放置在一个指定的文件夹, 然后将该文件夹设置为环境变量, 打开 cmd 输入 electron -v 查看是否安装成功.</p><p>然后启动项目会发现还是启动不了, 这个时候需要将 node 的环境变量更改一下</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># p<wbr>rocess.env.ELECTRON_OVERRIDE_DIST_PATH = 手动安装的 electron 的路径</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># p<wbr>rocess.env.ELECTRON_OVERRIDE_DIST_PATH = &#39;C:\\\\Users\\\\Administrator\\\\Downloads\\\\electron-v26.1.0-win32-x64&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 这里我选择在vite.config.ts的plugins的electron的onstart中设置</span></span>
<span class="line"><span style="color:#FFCB6B;">p<wbr>rocess.env.ELECTRON_OVERRIDE_DIST_PATH</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">C:</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">Users</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">Administrator</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">Downloads</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">electron-v26.1.0-win32-x64</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span></code></pre></div></li><li><p>发现 postinstall 就是下载对应版本的 zip 文件解压放到 ./dist 中, 然后创建 <code>path.txt</code> <code>echo &quot;electron.exe&quot; ./path.txt</code>, 我们可以手动这样做</p></li></ol></li><li><p>打包缓慢或下载文件失败, 需要手动将打包时它提示的文件下载, 放到对应目录:(win)</p><ul><li><code>C:\\Users\\Admin\\AppData\\Local\\electron-builder\\Cache</code> 目录下应该有 <code>winCodeSign</code> <code>nsis</code> 这两个目录</li><li><code>nsis-x.x.x.x</code> 和 <code>nsis-resources-x.x.x</code> 都是下载到 <code>C:\\Users\\Admin\\AppData\\Local\\electron-builder\\Cache\\nsis</code> 文件夹下</li></ul></li><li><p>在实现 electron 应用的 pin 功能时:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">ipcMain</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">window.unpin</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">win</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setAlwaysOnTop</span><span style="color:#F07178;">(</span><span style="color:#FF9CAC;">false</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">win</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setSize</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">768</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">576</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// win.setMinimumSize(768, 576)</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 设置可拖拽变更大小后, 上面设置的最小大小会失效</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// win.setResizable(true)</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 所以需要改成先设置可拖拽大小, 后设置最小大小</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">win</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setResizable</span><span style="color:#F07178;">(</span><span style="color:#FF9CAC;">true</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">win</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setMinimumSize</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">768</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">576</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// event.reply(&#39;window.unpin&#39;)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre></div></li></ol>`,2),p=[e];function t(c,r,i,y,D,F){return n(),a("div",null,p)}const d=s(o,[["render",t]]);export{A as __pageData,d as default};
